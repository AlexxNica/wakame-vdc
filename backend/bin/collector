#!/usr/bin/env ruby
# -*- coding: utf-8 -*-

require File.expand_path('../../config/path_resolver', __FILE__)

manifest = Isono::Runner::RpcServer::DEFAULT_MANIFEST.dup
manifest.instance_eval do
  node_name 'collector'

  load_module Isono::NodeModules::DataStore
  load_module Vdc::NodeModules::StaLocator

  config do |c|
    c.data_store.database_dsn = "mysql://localhost/dcmgr_test?user=root"
  end
end

Isono::Runner::RpcServer.start(manifest)
