<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Development - Wakame-vdc Documentation</title>
  

  <link rel="shortcut icon" href="../favicon.ico">
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  <link href="../custom.css" rel="stylesheet">

  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Wakame-vdc Documentation</a>
        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
      <ul class="current">
    
        
            <li class="toctree-l1 ">
                <a class="" href="..">Home</a>
                
            </li>
        

    
        
            <li class="toctree-l1 ">
                <a class="" href="../concept/">Concept</a>
                
            </li>
        

    
        
            <span>Getting started</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../installation/">Installation</a>
                    
                </li>
            
                <li class="toctree-l2 current">
                    <a class="current" href="./">Development</a>
                    
                        <ul>
                        
                            <li class="toctree-l3"><a href="#development-guide">Development guide</a></li>
                            
                                <li><a class="toctree-l4" href="#code-map">Code map</a></li>
                            
                                <li><a class="toctree-l4" href="#contributing-code">Contributing code</a></li>
                            
                        
                        </ul>
                    
                </li>
            
        

    
        
            <span>Usage</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../usage/">Basics</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../usage/advanced/">Advanced</a>
                    
                </li>
            
        

    
        
            <span>Instance Backup</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../instance-backup/">About</a>
                    
                </li>
            
        

    
        
            <span>Security Groups</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../security-groups/">About</a>
                    
                </li>
            
        

    
        
            <span>Support</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../jargon-dictionary/">Jargon Dictionary</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../faq/">FAQ</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../community/">Community</a>
                    
                </li>
            
        

    
</ul>

      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Wakame-vdc Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        <li>Getting started &raquo;</li>
      
    
    <li>Development</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="https://github.com/axsh/wakame-vdc" class="icon icon-github"> Edit on GitHub</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              <h1 id="development-guide">Development guide</h1>
<p>If you want try hacking away at the Wakame-vdc source code, this guide should be able to help you out a bit. The source can be found on <a href="https://github.com/axsh/wakame-vdc">github</a>.</p>
<p>You can just clone it as you would any <a href="http://git-scm.com">git</a> respository.</p>
<pre><code>git clone https://github.com/axsh/wakame-vdc
</code></pre>
<h2 id="code-map">Code map</h2>
<p>Now that you know where the code is, let's see what we can tell you about how it's structured.</p>
<p>The main backend source code is in the <a href="https://github.com/axsh/wakame-vdc/tree/master/dcmgr">dcmgr</a> directory.</p>
<p>The file <a href="https://github.com/axsh/wakame-vdc/blob/master/dcmgr/lib/dcmgr.rb">dcmgr/lib/dcmgr.rb</a> provides a nice overview of the code. It shows the module and class structure.</p>
<h4 id="webapi">WebAPI</h4>
<p>The WebAPI code uses <a href="http://www.sinatrarb.com">Sinatra</a> and is in the <a href="https://github.com/axsh/wakame-vdc/tree/master/dcmgr/lib/dcmgr/endpoints/12.03">dcmgr/lib/dcmgr/endpoints/12.03</a> directory.</p>
<h4 id="hypervisor-drivers">Hypervisor drivers</h4>
<p>The code that actually starts instances is in the <a href="https://github.com/axsh/wakame-vdc/tree/master/dcmgr/lib/dcmgr/drivers/hypervisor">dcmgr/lib/dcmgr/drivers/hypervisor</a> directory.</p>
<h4 id="scheduling">Scheduling</h4>
<p>All decisions that need to be made in order to start instances (assignment of <a href="../jargon-dictionary/#hva">host node</a>, IP address, MAC address, etc.) are referred to as scheduling and are located in the <a href="https://github.com/axsh/wakame-vdc/tree/master/dcmgr/lib/dcmgr/scheduler">dcmgr/lib/dcmgr/scheduler</a> directory. The code that actually executes these schedulers can be found here: <a href="https://github.com/axsh/wakame-vdc/blob/master/dcmgr/lib/dcmgr/node_modules/scheduler.rb">dcmgr/lib/dcmgr/node_modules/scheduler.rb</a></p>
<h4 id="security-groups">Security Groups</h4>
<p>The firewall (<a href="../security-groups/">Security Groups</a>) related code is located in the <a href="https://github.com/axsh/wakame-vdc/tree/master/dcmgr/lib/dcmgr/edge_networking">dcmgr/lib/dcmgr/edge_networking</a> directory. This code is executed from the following file: <a href="https://github.com/axsh/wakame-vdc/blob/master/dcmgr/lib/dcmgr/node_modules/service_netfilter.rb">dcmgr/lib/dcmgr/node_modules/service_netfilter.rb</a>.</p>
<p>The <a href="https://github.com/axsh/wakame-vdc/tree/master/dcmgr/lib/dcmgr/edge_networking/openflow">dcmgr/lib/dcmgr/edge_networking/openflow</a> directory is actually a leftover from an obsolete feature concerning virtual networks. That feature got split off and turned into <a href="https://github.com/axsh/openvnet">OpenVNet</a>. The directory is still there because <a href="../jargon-dictionary#natbox">the NATbox</a> uses <a href="http://archive.openflow.org">OpenFlow</a> to provide network address translation.</p>
<h4 id="amqp-messaging">AMQP messaging</h4>
<p>Wakame-vdc uses an in-house developed framework that handles all the <a href="http://www.amqp.org">AMQP</a> messaging. It's called Isono and can be found in its own <a href="https://github.com/axsh/isono">github repository</a>.</p>
<p>The classes that implement Isono can be found in the <a href="https://github.com/axsh/wakame-vdc/tree/master/dcmgr/lib/dcmgr/node_modules">dcmgr/lib/dcmgr/node_modules</a> and <a href="https://github.com/axsh/wakame-vdc/tree/master/dcmgr/lib/dcmgr/rpc">dcmgr/lib/dcmgr/rpc</a> directories.</p>
<h4 id="database-access">Database access</h4>
<p>We use <a href="http://sequel.jeremyevans.net">Sequel</a> to handle database access. The model classes are in the <a href="https://github.com/axsh/wakame-vdc/tree/master/dcmgr/lib/dcmgr/models">dcmgr/lib/dcmgr/models</a> directory.</p>
<p>The database schema is managed using <a href="http://sequel.jeremyevans.net/rdoc/files/doc/migration_rdoc.html">Sequel Migrations</a>. The migration files are in <a href="https://github.com/axsh/wakame-vdc/tree/master/dcmgr/config/db/migrations">config/db/migrations</a>.</p>
<h4 id="gui">GUI</h4>
<p>The GUI is a <a href="http://rubyonrails.org">Rails</a> application and is located in the <a href="https://github.com/axsh/wakame-vdc/tree/master/frontend/dcmgr_gui">frontend/dcmgr_gui</a> directory. There's also a not quite as pretty admin GUI available if you want to play around with it. <a href="https://github.com/axsh/wakame-vdc/tree/master/frontend/admin">frontend/admin</a></p>
<h4 id="cli-vdc-manage-and-gui-manage">CLI (vdc-manage and gui-manage)</h4>
<p>Both CLI's used by Wakame-vdc are implemented using <a href="http://whatisthor.com">Thor</a>.</p>
<p>The <em>vdc-manage</em> CLI is located in the <a href="https://github.com/axsh/wakame-vdc/tree/master/dcmgr/lib/dcmgr/cli">dcmgr/lib/dcmgr/cli</a> directory and is executed from <a href="https://github.com/axsh/wakame-vdc/blob/master/dcmgr/bin/vdc-manage">dcmgr/bin/vdc-manage</a>.</p>
<p>The <em>gui-manage</em> CLI can be found in <a href="https://github.com/axsh/wakame-vdc/tree/master/frontend/dcmgr_gui/lib/cli">frontend/dcmgr_gui/lib/cli</a> and is executed from <a href="https://github.com/axsh/wakame-vdc/blob/master/frontend/dcmgr_gui/bin/gui-manage">frontend/dcmgr_gui/bin/gui-manage</a>.</p>
<h4 id="configuration-files">Configuration files</h4>
<p>The configuration files use an in-house developed framework called <a href="https://github.com/axsh/fuguta">Fuguta</a>. Their definitions can be found in the <a href="https://github.com/axsh/wakame-vdc/tree/master/dcmgr/lib/dcmgr/configurations">dcmgr/lib/dcmgr/configurations</a> directory. Examples of the configuration files themselves can be found here: <a href="https://github.com/axsh/wakame-vdc/tree/master/dcmgr/config">dcmgr/config</a></p>
<h4 id="rpm-packaging">RPM packaging</h4>
<p>The RPM packaging scripts are in the aptly named <a href="https://github.com/axsh/wakame-vdc/tree/master/rpmbuild">rpmbuild</a> directory.</p>
<h4 id="debian-packaging">Debian packaging</h4>
<p>You might notice a <a href="https://github.com/axsh/wakame-vdc/tree/master/debian">debian</a> directory in the main repository. Even though the directory is there, Debian packaging is currently <strong>not</strong> officially supported. Feel free to play around with the packaging info in this directory but don't expect it to work.</p>
<h4 id="mussel">Mussel</h4>
<p>Mussel is an API client and autotesting framework for Wakame-vdc written in bash. It can be found here: <a href="https://github.com/axsh/wakame-vdc/tree/master/client/mussel">client/mussel</a></p>
<h4 id="autotesting">Autotesting</h4>
<p>There are currently three autotest suites for Wakame-vdc.</p>
<p>Unit tests using <a href="http://rspec.info">RSpec</a> are here: <a href="https://github.com/axsh/wakame-vdc/tree/master/dcmgr/spec">dcmgr/spec</a></p>
<p>Integration tests using the Mussel framework are here: <a href="https://github.com/axsh/wakame-vdc/tree/master/client/mussel/test">client/mussel/test</a></p>
<p>Integration tests using <a href="http://rspec.info">RSpec</a> are here: <a href="https://github.com/axsh/wakame-vdc/tree/master/spec_integration">spec_integration</a></p>
<h4 id="instance-init-scripts">Instance init scripts</h4>
<p>The instances need to be made aware of meta-data that Wakame-vdc sets for them like IP address, hostname, etc. Scripts to do this are located here: <a href="https://github.com/axsh/wakame-vdc/tree/master/wakame-init">wakame-init</a></p>
<h4 id="upstart-jobs">Upstart jobs</h4>
<p>The upstart jobs that are used to start Wakame-vdc services are located here: <a href="https://github.com/axsh/wakame-vdc/tree/master/contrib/etc">contrib/etc</a></p>
<h2 id="contributing-code">Contributing code</h2>
<p>We encourage you to send some of your code back to us. You can do so by using github's <em>fork &amp; pull</em> method as described <a href="https://help.github.com/articles/using-pull-requests/#fork--pull">here</a>. You will need to have a github account.</p>
<p>Once you've made a pull request to us, we will run our automated test suite on it and review the code. We might ask you to make certain modifications before (and if) we finally merge your code into the main repository.</p>
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../usage/" class="btn btn-neutral float-right" title="Basics"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../installation/" class="btn btn-neutral" title="Installation"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
    <!-- Copyright etc -->
    </p>
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
        
            <a href="https://github.com/axsh/wakame-vdc" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
        
      <span><a href="../installation/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      <span style="margin-left: 15px"><a href="../usage/" style="color: #fcfcfc">Next &raquo;</a></span>
    </span>
</div>

<!--
MkDocs version  : 0.12.2
Docs Build Date : 2015-04-27 07:42:06.398738
-->
</body>
</html>